# メモ

## MCPサーバーをClaudeDesktopからそのままインストールする

```bash
claude mcp add-from-claude-desktop
```

## Serena

リポジトリ:[serena](https://github.com/oraios/serena)
※ [Claude Codeを10倍賢くする無料ツール「Serena」の威力とトークン効率化術](https://zenn.dev/sc30gsw/articles/ff81891959aaef)を参考にしています。

## 初期設定

```claudecode
/mcp__serena__initial_instructions
```

## Sub Agents

`.claude/agents/serena-expert.md` で定義されているエージェント。
Serena Expert（serena-expert）は、**エリートアプリ開発エージェント**として
設計された特別なエージェントです。

`/serena`コマンドを戦略的に活用し、トークン効率的で構造化された問題解決を行います。
アプリケーション、コンポーネント、API、システム、テストの作成を最大効率で実現します。

## コマンド一覧

オプション 説明 使用例 適用場面
-q 高速モード（3-5思考ステップ） /serena "ボタン修正" -q 簡単なバグ、小さな機能追加
-d 深層モード（10-15思考ステップ） /serena "アーキテクチャ設計" -d 複雑なシステム、重要な設計決定
-c コード重視の分析 /serena "パフォーマンス最適化" -c コードレビュー、リファクタリング
-s ステップバイステップ実装 /serena "ダッシュボード構築" -s フル機能開発
-v 詳細出力（プロセス表示） /serena "バグデバッグ" -v 学習、プロセス理解
-r リサーチフェーズ含む /serena "フレームワーク選択" -r 技術決定
-t 実装TODO作成 /serena "新機能" -t プロジェクト管理

## コマンドの使用パターン別解説

### 1. 基本的な使用方法

```bash
# シンプルな問題解決
/serena "ログインバグ修正"

# 高速な機能実装
/serena "検索フィルター追加" -q

# コード最適化
/serena "読み込み時間改善" -c
```

### 2. 高度な使用方法

```bash
# 複雑なシステム設計（リサーチ付き）
/serena "マイクロサービスアーキテクチャ設計" -d -r -v

# フル機能開発（TODO作成付き）
/serena "チャート付きユーザーダッシュボード実装" -s -t -c

# 深層分析（ドキュメント付き）
/serena "新フレームワークへの移行" -d -r -v --focus=frontend
```

## 問題タイプ別の自動選択

Serenaは**キーワードベース**で最適な思考パターンを自動選択します：

### デバッグパターン（5-8思考ステップ）

**キーワード**: error, bug, issue, broken, failing

```bash
/serena "APIエラーが発生している"
# → 症状分析 → 環境確認 → 原因仮説 → 検証 → 解決策 → 実装 → 検証戦略 → 予防措置
```

### 設計パターン（8-12思考ステップ）

**キーワード**: architecture, system, structure, plan

```bash
/serena "ユーザー認証システム設計"
# → 要件整理 → 制約確認 → 選択肢生成 → 評価 → 技術選定 → 設計決定 → 実装フェーズ → リスク軽減
```

### 実装パターン（6-10思考ステップ）

**キーワード**: build, create, add, feature

```bash
/serena "リアルタイムチャット機能追加"
# → 仕様確認 → 技術選定 → 設計 → 依存関係 → 実装順序 → テスト戦略 → エラーハンドリング
```

### 最適化パターン（4-7思考ステップ）

**キーワード**: performance, slow, improve, refactor

```bash
/serena "データベースクエリ最適化"
# → 現状分析 → ボトルネック特定 → 改善機会 → 解決選択肢 → 優先度 → 実装影響評価
```

## orchestratorエージェント活用

orchestratorエージェントに采配を依頼してください。

再開できるように、それをIssueにも記載して。その後、進めてください！毎回、すべてのエージェントに対し次のことを伝えてください。「CLAUDE.md を読み、深層思考で進めてください。ゆっくりでいいので、常に質を優先して一度で完璧に答える という基本原則を厳守。私の依頼を入念に分析し、僅かな不明点でもあれば質問すること。適当な 思考・出力は信頼と価値を地に落とします。求めてるのは速さではなく質。急がず、丁寧な仕事が 最終的な効率を最大化します。深層思考で意図を分析、200%の価値を提供して。私は適当か否かを 常に見てます。」
