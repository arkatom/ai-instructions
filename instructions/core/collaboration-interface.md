---
title: 協働インターフェース設計
description: 人間・AI間およびAI同士の効果的な情報交換
priority: HIGH
---

# 協働インターフェースの原則

## 🎯 根本原則

情報は構造化し、意図は明示し、判断は追跡可能にする。

## 📝 コード内コミュニケーション

### コメントの優先順位
```yaml
1. なぜ（Why）: 設計判断の理由
2. 注意（Warning）: 将来の変更への警告
3. 前提（Assumption）: 依存する条件
4. 参照（Reference）: 関連情報へのリンク
```

### 実装例の注釈
```javascript
// ❌ 悪い例：何をしているかの説明
// ユーザーデータを取得
const user = await fetchUser(id);

// ✅ 良い例：なぜこうしたかの説明
// キャッシュを使わない理由：リアルタイム性が重要な決済画面のため
const user = await fetchUser(id, { cache: false });
```

## 🔄 意思決定の記録形式

### ADR（Architecture Decision Record）テンプレート
```markdown
## 状況
- 解決すべき問題
- 制約条件
- 関係者

## 検討した選択肢
1. 選択肢A：利点/欠点
2. 選択肢B：利点/欠点
3. 選択肢C：利点/欠点

## 決定
選択した案とその理由

## 結果
- 予想される影響
- 必要なアクション
- リスクと対策
```

## 🤝 エージェント間プロトコル

### 情報交換の標準形式
```json
{
  "context": "現在の作業状況",
  "intent": "実行しようとしている内容",
  "dependencies": ["依存する前提条件"],
  "outputs": ["生成する成果物"],
  "risks": ["認識しているリスク"]
}
```

### タスク引き継ぎ形式
```yaml
completed:
  - 実施した内容
  - 生成したファイル
  - 変更した設定

pending:
  - 残作業
  - 判断待ち事項
  - ブロッカー

notes:
  - 注意事項
  - 代替案
  - 参考情報
```

## 📊 出力品質の基準

### コードレビューコメント
```markdown
## 観察
「〜という実装になっています」

## 影響
「これにより〜という問題が発生する可能性があります」

## 提案
「〜という方法を検討してはどうでしょうか」

## 例
```code example```
```

### PR/Issue記述
```markdown
## 背景
問題の発生経緯

## 変更内容
- 変更点1：理由
- 変更点2：理由

## テスト方法
再現・検証手順

## 影響範囲
- 影響を受ける機能
- 後方互換性
```

## 🚦 非同期協働の作法

### 状態の明示
```yaml
🔴 ブロック中: 「〜待ち」
🟡 作業中: 「〜を実装中」
🟢 レビュー可: 「〜完了」
⚪ 保留: 「〜のため一時停止」
```

### コンテキスト保存
```json
{
  "session": {
    "goal": "最終目的",
    "current": "現在の状態",
    "next": "次のアクション",
    "blockers": ["阻害要因"]
  }
}
```

## 🔍 トレーサビリティ確保

### 変更の追跡
```bash
# コミットメッセージ
type(scope): 要約 (#issue)

詳細説明
- 変更理由
- 実装方法
- 副作用

Refs: #関連issue
```

### ドキュメント連携
```markdown
See: [設計書](link)
Related: [関連PR](link)
Implements: [仕様](link)
Tests: [テスト結果](link)
```

## ⚡ リアルタイム協働

### 作業宣言
```
@starting: タスクX開始
@blocked: Y待ちで停止
@completed: タスクX完了
@needhelp: Z について助言求む
```

### 競合回避
```yaml
working_on:
  - file: path/to/file
    sections: [lines 10-50]
    estimated: 30min
```

## 💭 メタ情報の伝達

### 確信度の表明
```markdown
✅ 確実：テスト済み・検証済み
⚠️ 推測：おそらく正しいが未検証
❓ 不明：調査が必要
```

### 優先度の明示
```
🔴 Critical: 即座に対応必要
🟠 High: 今日中に対応
🟡 Medium: 今週中に対応
🟢 Low: 時間があるとき
```

---

*Remember: 明確な情報交換は、効果的な協働の基盤である。*